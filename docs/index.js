!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=23)}([function(t,e,n){"use strict";function i(t,e){this.components={},this.name=t,this.add=function(t){var e=this;t.forEach(function(t){e.components[t.name]=t})},this.get=function(t){return this.components[t]},this.has=function(t){"string"==typeof t&&(t=[t]);for(var e=0,n=t.length;e<n;e+=1){var i=t[e],s=i.replace("not:",""),o=i!==s;if(this.components.hasOwnProperty(s)===o)return!1}return!0},this.remove=function(t){for(var e=0,n=t.length;e<n;e+=1){var i=t[e];!0===this.components.hasOwnProperty(i)&&delete this.components[i]}},this.add(e)}function s(t){this.entities=[],this.add=function(t){this.entities.push(t)},this.get=function(t){for(var e=0,n=this.entities.length;e<n;e+=1){var i=this.entities[e];if(i.name===t)return i}},this.remove=function(t){this.entities.splice(this.entities.indexOf(t),1)},this.system=function(e,n){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.entities).forEach(function(i){!0===i.has(e)&&n.call(t,i)})}}n.d(e,"b",function(){return s}),n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function i(t,e){this.x=t,this.y=e}function s(t,e,n,i){this.height=i,this.width=n,this.x=t,this.y=e}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},function(t,e,n){"use strict";function i(t,e){function n(t){t.preventDefault()}function i(t){var n=t.button,i=["LEFT","MIDDLE","RIGHT"];if(void 0!==i[n]){var s=t.target.getBoundingClientRect(),o=t.clientX-s.left,r=t.clientY-s.top;e.push({type:"MOUSE",action:"CLICK_"+i[n],state:"DOWN",x:o,y:r}),t.preventDefault()}}function s(t){var n=t.target.getBoundingClientRect(),i=t.clientX-n.left,s=t.clientY-n.top;e.push({type:"MOUSE",action:"MOVE",state:"ENTER",x:i,y:s}),t.preventDefault()}function o(t){var n=t.target.getBoundingClientRect(),i=t.clientX-n.left,s=t.clientY-n.top;e.push({type:"MOUSE",action:"MOVE",state:"LEAVE",x:i,y:s}),t.preventDefault()}function r(t){var n=t.target.getBoundingClientRect(),i=t.clientX-n.left,s=t.clientY-n.top;e.push({type:"MOUSE",action:"MOVE",x:i,y:s}),t.preventDefault()}function a(t){var n=t.button,i=["LEFT","MIDDLE","RIGHT"];if(void 0!==i[n]){var s=t.target.getBoundingClientRect(),o=t.clientX-s.left,r=t.clientY-s.top;e.push({type:"MOUSE",action:"CLICK_"+i[n],state:"UP",x:o,y:r}),t.preventDefault()}}function c(){t.addEventListener("contextmenu",n),t.addEventListener("mousedown",i),t.addEventListener("mouseenter",s),t.addEventListener("mouseleave",o),t.addEventListener("mousemove",r),t.addEventListener("mouseup",a),t.addEventListener("wheel",u)}function u(t){var n=t.target.getBoundingClientRect(),i=t.clientX-n.left,s=t.clientY-n.top;e.push({type:"MOUSE",action:"SCROLL_"+(t.deltaY>0?"DOWN":"UP"),x:i,y:s}),t.preventDefault()}c.call(this),this.destroy=function(){t.removeEventListener("contextmenu",n),t.removeEventListener("mousedown",i),t.removeEventListener("mouseenter",s),t.removeEventListener("mouseleave",o),t.removeEventListener("mousemove",r),t.removeEventListener("mouseup",a),t.removeEventListener("wheel",u)},this.setup=c}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(1),s={collidePointPoint:function(t,e){if(t.x!==e.x||t.y!==e.y)return!1;return!0},collidePointRectangle:function(t,e){if(t.x<e.x||t.x>e.x+e.width||t.y<e.y||t.y>e.y+e.height)return!1;return!0},collideRectangleRectangle:function(t,e){if(t.x+t.width<e.x||t.x>e.x+e.width||t.y+t.height<e.y||t.y>e.y+e.height)return!1;return!0}};function o(t,e){var n=[],o="collide";return t instanceof i.a==!0&&(n.push(t),o+="Point"),e instanceof i.a==!0&&(n.push(e),o+="Point"),-1===n.indexOf(t)&&t instanceof i.b==!0&&(n.push(t),o+="Rectangle"),-1===n.indexOf(e)&&e instanceof i.b==!0&&(n.push(e),o+="Rectangle"),s[o].apply(null,n)}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";n.r(e),function(t){var i=n(6);n.d(e,"destroy",function(){return i.a});var s=n(7);n.d(e,"render",function(){return s.a});var o=n(8);n.d(e,"setup",function(){return o.a});var r=n(9);n.d(e,"start",function(){return r.a});var a=n(10);n.d(e,"update",function(){return a.a}),void 0!==t.hot&&t.hot.accept(["./destroy.js","./render.js","./setup.js","./start.js","./update.js"])}.call(this,n(4)(t))},function(t,e,n){"use strict";function i(){console.log("destroy loading scene"),console.log("-------"),delete this.state.redirect}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function i(){this.context.fillStyle="#181a1f",this.context.fillRect(0,0,this.size.width,this.size.height),this.context.font="16px Courier New",this.context.textAlign="start",this.context.textBaseline="top",this.context.fillStyle="#6b717d",this.context.fillText("/ Theatre",8,8),this.context.fillStyle="#d7dae0",this.context.fillText("$ preloading assets...",8,32),!1===this.preloading&&(this.context.fillText("$ preloading completed",8,56),this.context.fillText("$ loading demo scene...",8,80))}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function i(){console.log("setup loading scene")}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function i(){console.log("start loading scene"),this.state.redirect=!1}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function i(){var t=this;!1===this.preloading&&!1===this.state.redirect&&(setTimeout(function(){t.load("main")},0),this.state.redirect=!0)}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.r(e),function(t){var i=n(12);n.d(e,"destroy",function(){return i.a});var s=n(19);n.d(e,"render",function(){return s.a});var o=n(13);n.d(e,"setup",function(){return o.a});var r=n(18);n.d(e,"start",function(){return r.a});var a=n(20);n.d(e,"update",function(){return a.a}),void 0!==t.hot&&t.hot.accept(["./destroy.js","./render.js","./setup.js","./start.js","./update.js"])}.call(this,n(4)(t))},function(t,e,n){"use strict";function i(){console.log("destroy demo scene"),console.log("-------"),this.state={},delete this.world}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(2);function s(){this.state.inputs=[],console.log("setup demo scene");new i.a(this.context.canvas,this.state.inputs)}},function(t,e,n){"use strict";n.r(e),function(t){var i=n(15);n.d(e,"destroy",function(){return i.a});var s=n(16);n.d(e,"render",function(){return s.a});var o=n(17);n.d(e,"setup",function(){return o.a});var r=n(22);n.d(e,"start",function(){return r.a});var a=n(21);n.d(e,"update",function(){return a.a}),void 0!==t.hot&&t.hot.accept(["./destroy.js","./render.js","./setup.js","./start.js","./update.js"])}.call(this,n(4)(t))},function(t,e,n){"use strict";function i(){console.log("destroy ending scene"),console.log("-------"),this.state={},delete this.world}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function i(){this.context.fillStyle="#181a1f",this.context.fillRect(0,0,this.size.width,this.size.height),this.context.font="16px Courier New",this.context.textAlign="start",this.context.textBaseline="top",this.context.fillStyle="#6b717d",this.context.fillText("You Loose",8,8),this.context.fillStyle="#d7dae0",this.context.fillText("click to start Again...",8,32)}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(2);function s(){console.log("setup ending scene"),this.state.inputs=[];new i.a(this.context.canvas,this.state.inputs)}},function(t,e,n){"use strict";var i=n(0);function s(t,e){this.name="hitbox",this.width=t,this.height=e}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.name="position",this.x=t,this.y=e,this.z=n}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";this.name="text",this.text=t,this.color=e}function a(t){this.name="background",this.color=t}function c(t){this.name="clickable",this.action=t}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]?arguments[5]:500),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100;this.name="stat",this.id=t,this.val=e,this.max=o,this.addVal=n,this.price=i,this.elapsed=0,this.duration=s,this.decreaseVal=1,this.add=function(){this.val+this.addVal>o?this.val=this.max:this.val=this.val+this.addVal},this.decrease=function(){this.val-this.decreaseVal<0?this.val=0:this.val=this.val-this.decreaseVal}}function l(){this.name="activate"}function h(){var t=this;console.log("start demo scene"),this.world=new i.b(this);var e,n,h,d,f,p,g,v;e=new i.a("hunger",[new o(0,0),new s(160,195),new a("grey"),new r("Burger","yellow"),new u("hunger",100,2,5,1,500),new c(function(t){t.get("stat").add(),d.get("coin").buy(t.get("stat").price)}),new l]),n=new i.a("sleep",[new o(160,0),new s(160,195),new a("orange"),new r("ZZZ","black"),new u("sleep",100,1,1,1,1e3),new c(function(t){t.get("stat").add(),d.get("coin").buy(t.get("stat").price)}),new l]),h=new i.a("fun",[new o(0,195),new s(160,195),new a("black"),new u("fun",100,10,20,2,3e3),new r("Dance","yellow"),new c(function(t){t.get("stat").add(),d.get("coin").buy(t.get("stat").price)}),new l]),d=new i.a("currency",[new o(160,195),new s(160,195),new a("brown"),new function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.name="coin",this.val=t,this.addVal=e,this.add=function(){this.val=this.val+this.addVal},this.buy=function(t){this.val=this.val-t}}(100),new r("Work","yellow"),new c(function(t){t.get("coin").add(),h.get("stat").decrease()}),new l]),f=new i.a("button1",[new o(10,395),new s(140,60),new a("yellow"),new r("Button 1","black"),new c(function(t){return console.log(t.name)})]),p=new i.a("button2",[new o(160,395),new s(140,60),new a("red"),new r("Button 2","black"),new c(function(t){return console.log(t.name)})]),g=new i.a("button3",[new o(10,465),new s(140,60),new a("green"),new r("Button 2","black"),new c(function(t){return console.log(t.name)})]),v=new i.a("button4",[new o(160,465),new s(140,60),new a("orange"),new r("Button 3","black"),new c(function(t){return console.log(t.name)})]),[e,n,h,d,f,p,g,v].forEach(function(e){t.world.add(e)})}n.d(e,"a",function(){return h})},function(t,e,n){"use strict";function i(t){var e=t.get("text"),n=t.get("position"),i=t.get("hitbox");this.context.lineWidth=2,this.context.font="bold 20px Arial",this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillStyle=e.color,i?this.context.fillText(e.text,n.x+i.width/2,n.y+i.height/2):this.context.fillText(e.text,n.x,n.y)}function s(t){var e=t.get("background"),n=t.get("position"),i=t.get("hitbox");this.context.fillStyle=e.color,this.context.fillRect(n.x,n.y,i.width,i.height)}function o(t){var e=t.get("coin"),n=t.get("position"),i=t.get("hitbox");this.context.fillStyle="white",this.context.lineWidth=2,this.context.font="bold 16px Arial",this.context.textAlign="center",this.context.textBaseline="top",this.context.fillText(e.val+"$",n.x+i.width-30,n.y+15),this.context.stroke()}function r(t){var e=t.get("position"),n=t.get("hitbox"),i=t.get("stat");this.context.fillStyle="green",this.context.lineWidth=2,this.context.font="bold 20px Arial",this.context.textAlign="center",this.context.textBaseline="top",this.context.fillText(i.val,e.x+n.width-30,e.y+15)}function a(){this.context.fillStyle="#d7dae0",this.context.fillRect(0,0,this.size.width,this.size.height),this.world.system(["background","hitbox","position"],s),this.world.system(["text","position"],i),this.world.system(["background","stat","hitbox","position"],r),this.world.system(["background","coin","hitbox","position"],o)}n.d(e,"a",function(){return a})},function(t,e,n){"use strict";var i=n(3),s=n(1);function o(t){var e=t.get("clickable"),n=t.get("position"),o=t.get("hitbox");this.state.inputs.forEach(function(r){if("MOUSE"===r.type&&"CLICK_LEFT"===r.action&&"DOWN"===r.state){var a=new s.a(r.x,r.y),c=new s.b(n.x,n.y,o.width,o.height);!0===Object(i.a)(a,c)&&e.action(t)}})}function r(t){var e=t.get("stat");for(e.elapsed+=this.delta.update;e.elapsed>=e.duration;)e.elapsed-=e.duration,e.decrease(),e.val<=0&&this.load("ending")}function a(t){t.get("coin").val<=0&&this.load("ending")}function c(){this.world.system(["stat","activate"],r),this.world.system(["coin","activate"],a),this.world.system(["hitbox","position","clickable"],o),this.state.inputs.length=0}n.d(e,"a",function(){return c})},function(t,e,n){"use strict";var i=n(3),s=n(1);function o(t){var e=this;this.state.inputs.forEach(function(t){if("MOUSE"===t.type&&"CLICK_LEFT"===t.action&&"DOWN"===t.state){var n=new s.a(t.x,t.y),o=new s.b(0,0,e.size.width,e.size.height);!0===Object(i.a)(n,o)&&e.load("main")}})}function r(){this.world.system(["score"],o),this.state.inputs.length=0}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";var i=n(0);function s(){this.world=new i.b(this),this.world.add(new i.a("score",[new function(){this.name="score"}])),console.log("start ending scene"),this.state.redirect=!1}n.d(e,"a",function(){return s})},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"loading",function(){return r}),n.d(i,"main",function(){return a}),n.d(i,"ending",function(){return c});function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=[].concat(s([]),s([]),s([])),r=n(5),a=n(11),c=n(14);new function(t){var e=t.assets,n=t.container,i=t.scenes,s=t.size,o=t.expose||!1,r=t.framerate||60,a=t.sharp||!1,c=t.speed||1,u=null,l=!1;this.preloading=!1,this.scenes=i,this.size=s,this.state={},this.version="0.26.0",this.load=function(t){u=t},this.restart=function(){l=!0},function(){var t=this,i=new function(t,e,n,i){var s=document.createElement("canvas"),o=s.getContext(t),r=window.devicePixelRatio||1;s.setAttribute("id",e),s.setAttribute("height",r*i),s.setAttribute("width",r*n),s.style.height=i+"px",s.style.width=n+"px",o.scale(r,r),this.context=o,this.element=s,this.sharp=function(){this.element.style.imageRendering="-moz-crisp-edges",this.element.style.imageRendering="-webkit-crisp-edges",this.element.style.imageRendering="crisp-edges",this.element.style.imageRendering="pixelated",this.context.imageSmoothingEnabled=!1}}("2d","theatre",this.size.width,this.size.height),s=new function(t,e,n){var i=[],s={current:!1,duration:0,easing:null,elapsed:0,force:{x:0,y:0},shift:{x:0,y:0}};this.position={x:0,y:0},this.size={width:e,height:n},this.add=function(t){for(var e=0,n=i.length-1;n>=0;n-=1){var s=i[n];if(t.destination.z>=s.destination.z){e=n+1;break}}i.splice(e,0,t)},this.idle=function(){s={current:!1,duration:0,easing:null,elapsed:0,force:{x:0,y:0},shift:{x:0,y:0}}},this.render=function(){var e=this;i.forEach(function(n){var i=n.destination,o=n.frame,r=n.source;!0===e.visible(i.x,i.y,o.width,o.height)&&t.drawImage(r,o.x,o.y,o.width,o.height,i.x-(e.position.x+s.shift.x),i.y-(e.position.y+s.shift.y),i.width,i.height)}),i=[]},this.set=function(t,e){this.position.x=t,this.position.y=e},this.shake=function(t,e,n){var i=t.x,o=t.y;s.force={x:i,y:o},s.current=!0,s.duration=e,s.easing=n},this.update=function(t){if(!1!==s.current)if(s.elapsed+t>=s.duration)this.idle();else{s.elapsed+=t;var e=s.easing(s.elapsed/s.duration),n=2*Math.random()*Math.PI;s.shift.x=Math.round(Math.cos(n)*s.force.x*e),s.shift.y=Math.round(Math.sin(n)*s.force.y*e)}},this.visible=function(t,e,n,i){var o=this.position.x+s.shift.x,r=this.position.y+s.shift.y,a=this.size.width,c=this.size.height;return!(t+n<=o||t>=o+a||e+i<=r||e>=r+c)}}(i.context,this.size.width,this.size.height);!0===a&&i.sharp(),n.appendChild(i.element),this.container=n,this.context=i.context,this.element=i.element,this.camera=s,this.assets={},this.delta={},this.delta.render=0,this.delta.update=0,this.scene=this.scenes.loading,this.scene.setup.call(this),this.scene.start.call(this);var o=new function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=null,s=null;this.framerate=t,this.speed=e,this.render=function(t){var e=Date.now();null!==i&&t(e-i),requestAnimationFrame(this.render.bind(this,t)),i=e},this.update=function(t){var e=Date.now();for(null!==s&&(n+=e-s);n>=1e3/this.framerate/this.speed;)n-=1e3/this.framerate/this.speed,t(1e3/this.framerate);s=e,setTimeout(this.update.bind(this,t),1e3/Math.max(this.framerate,60))}}(r,c);o.update(function(e){return t.delta.update=e,t.scene.update.call(t),t.camera.update(e),!0===l?(t.scene.start.call(t),void(l=!1)):null!==u?(t.scene.destroy.call(t),t.scene=t.scenes[u],t.scene.setup.call(t),t.scene.start.call(t),void(u=null)):void 0}),o.render(function(e){t.delta.render=e,t.scene.render.call(t),t.camera.render()}),function(t,e){var n=[];t.forEach(function(t){var e=new Promise(function(e,n){if("dataset"===t.type&&(t.getter=function(){return t.source},e(t)),"image"===t.type){var i=new Image;i.src=t.source,i.onload=function(){t.getter=function(){return i},e(t)}}else if("sound"===t.type){var s=new Audio(t.source);s.oncanplaythrough=function(){t.getter=function(){return s.cloneNode()},e(t)}}});n.push(e)}),Promise.all(n).then(e)}(e,function(e){e.forEach(function(e){void 0===t.assets[e.type+"s"]&&(t.assets[e.type+"s"]={}),void 0===t.assets[e.type+"s"][e.scope]&&(t.assets[e.type+"s"][e.scope]={}),t.assets[e.type+"s"][e.scope][e.name]=e.getter}),t.preloading=!1}),this.loop=o,this.preloading=!0}.call(this,t),!0===o&&(window.theatre=this)}({assets:o,container:document.body,expose:!0,scenes:i,sharp:!0,size:{width:320,height:530}})}]);
//# sourceMappingURL=index.js.map